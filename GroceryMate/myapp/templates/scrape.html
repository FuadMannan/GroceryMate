{% extends 'base.html' %}
{% block title %}Grocery Mate{% endblock %}
{% block content %}
<div class="border m-3 p-2">
    <h2>Stores</h2>
    <div style="max-height: 500px; overflow-y: scroll;">
	    <table class="table table-striped table-bordered">
            <thead>
                <th>StoreID</th>
                <th>Chain</th>
                <th>Store Name</th>
                <th>Location</th>
            </thead>
            <tbody>
                {% for item in store_items %}
                <tr>
                    <td>{{ item.StoreID }}</td>
                    <td>{{ item.ChainID.ChainName }}</td>
                    <td>{{ item.StoreName }}</td>
                    <td>{{ item.Location }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <form method="get" action="get_locations">
        <div class="mb-3">
            Scrape Test
        </div>
        <select id="chain" name="chain" class="form-select my-2">
            {% for chain in chains %}
                {% if chain == "Walmart" %}
                    <option value="{{ chain }}" disabled>{{ chain }}</option>
                {% else %}
                    <option value="{{ chain }}">{{ chain }}</option>
                {% endif %}
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">Scrape</button>
    </form>
    <div>
        {% if store %}
        <span>Getting data for {{ store }}</span>
        {% endif %}
    </div>
</div>
<div class="border m-3 p-2">
    <h2>Products</h2>
    <div style="max-height: 500px; overflow-y: scroll;">
        <table class="table table-striped table-bordered pb-5">
            <thead>
                <th>ProductID</th>
                <th>Product Name</th>
                <th>Brand</th>
                <th>Category</th>
            </thead>
            <tbody>
                {% for item in product_items %}
                <tr>
                    <td>{{ item.ProductID }}</td>
                    <td>{{ item.ProductName }}</td>
                    <td>{{ item.BrandID.BrandName }}</td>
                    <td>{{ item.Category }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <form method="get" action="get_products_prices">
        <div class="mb-3">
            Scrape Test
        </div>
        <select id="chain" name="chain" class="form-select my-2">
            {% for chain in chains %}
                {% if chain == "Walmart" %}
                    <option value="{{ chain }}" disabled>{{ chain }}</option>
                {% else %}
                    <option value="{{ chain }}">{{ chain }}</option>
                {% endif %}
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">Scrape</button>
    </form>
    <div>
        {% if store %}
        <span>Getting data for {{ store }}</span>
        {% endif %}
    </div>
</div>
<div class="border m-3 p-2">
    <h2>Prices</h2>
    <div style="max-height: 500px; overflow-y: scroll;">
        <table class="table table-striped table-bordered">
            <thead>
                <th>PriceID</th>
                <th>Product</th>
                <th>Chain</th>
                <th>Price</th>
            </thead>
            <tbody>
                {% for item in price_items %}
                <tr>
                    <td>{{ item.PriceID }}</td>
                    <td>{{ item.ProductID.ProductName }}</td>
                    <td>{{ item.ChainID.ChainName }}</td>
                    <td>{{ item.Price }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <form method="post">
        <div class="mb-3">
            Scrape Test
        </div>
        <select id="chain" name="chain" class="form-select my-2">
            {% for chain in chains %}
                {% if chain == "Walmart" %}
                    <option value="{{ chain }}" disabled>{{ chain }}</option>
                {% else %}
                    <option value="{{ chain }}">{{ chain }}</option>
                {% endif %}
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">Scrape</button>
    </form>
    <div>
        {% if store %}
        <span>Getting data for {{ store }}</span>
        {% endif %}
    </div>
</div>
{% endblock %}
